(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12d084cc"],{7570:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var n=a("b775");function r(){return Object(n["a"])({url:"/nslist",method:"get"})}},"7b97":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("基本配置")])]),a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"ingress名称"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),a("el-form-item",{attrs:{label:"命名空间"}},[a("el-select",{on:{change:t.changeNs},model:{value:t.namespace,callback:function(e){t.namespace=e},expression:"namespace"}},t._l(t.nslist,(function(t){return a("el-option",{attrs:{label:t.Name,value:t.Name}})})),1)],1)],1)],1),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("规则")])]),t._l(t.rules,(function(e,n){return a("el-form",{model:{value:t.rules,callback:function(e){t.rules=e},expression:"rules"}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"域名"}},[a("el-input",{attrs:{placeholder:"填写域名"},model:{value:e.host,callback:function(a){t.$set(e,"host",a)},expression:"rule.host"}})],1),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addPathCfg(n)}}},[t._v("+")])],1),t._l(e.paths,(function(e,r){return[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"Path"}},[a("el-input",{attrs:{placeholder:"Path"},model:{value:e.path,callback:function(a){t.$set(e,"path",a)},expression:"pathcfg.path"}})],1),a("el-form-item",{attrs:{label:"服务名"}},[a("el-select",{model:{value:e.svc_name,callback:function(a){t.$set(e,"svc_name",a)},expression:"pathcfg.svc_name"}},t._l(t.svclist,(function(t){return a("el-option",{attrs:{label:t.Name,value:t.Name}})})),1)],1),a("el-form-item",{attrs:{label:"端口"}},[a("el-input",{attrs:{placeholder:"填写服务端口"},model:{value:e.port,callback:function(a){t.$set(e,"port",a)},expression:"pathcfg.port"}})],1),a("el-form-item",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:r>0,expression:"pathindex>0"}],attrs:{type:"primary"},on:{click:function(e){return t.rmPathCfg(n,r)}}},[t._v("-")])],1)],1)]}))],2)}))],2),a("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.postNew()}}},[t._v("保存")])],1)],1)},r=[],s=(a("4160"),a("a434"),a("b0c0"),a("159b"),a("9f46")),l=a("7570"),c=a("b775");function o(t){return Object(c["a"])({url:"/svc?ns="+t,method:"get"})}var i={data:function(){return{name:"",namespace:"",rules:[{host:"",paths:[{path:"",svc_name:"",port:"80"}]}],nslist:[],svclist:[]}},created:function(){var t=this;Object(l["a"])().then((function(e){t.nslist=e.data}))},methods:{clearSelectSvc:function(){this.rules.forEach((function(t){t.paths.forEach((function(t){t.svc_name=""}))}))},changeNs:function(t){var e=this;this.clearSelectSvc(),o(t).then((function(t){e.svclist=t.data}))},addPathCfg:function(t){this.rules.forEach((function(e,a){a===t&&e.paths.push({path:"",svc_name:"",port:"80"})}))},rmPathCfg:function(t,e){this.rules.forEach((function(a,n){n===t&&a.paths.forEach((function(t,n){n===e&&a.paths.splice(n,1)}))}))},postNew:function(){var t={Name:this.name,Namespace:this.namespace,Rules:this.rules};Object(s["b"])(t).then((function(t){console.log(t.data)}))}}},u=i,f=a("2877"),h=Object(f["a"])(u,n,r,!1,null,null,null);e["default"]=h.exports},"9f46":function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return s}));var n=a("b775");function r(t){return Object(n["a"])({url:"/ingress?ns="+t,method:"get"})}function s(t){return Object(n["a"])({url:"/ingress",method:"post",data:t})}},a434:function(t,e,a){"use strict";var n=a("23e7"),r=a("23cb"),s=a("a691"),l=a("50c4"),c=a("7b0b"),o=a("65f0"),i=a("8418"),u=a("1dde"),f=a("ae40"),h=u("splice"),p=f("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,d=Math.min,v=9007199254740991,b="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!h||!p},{splice:function(t,e){var a,n,u,f,h,p,g=c(this),x=l(g.length),_=r(t,x),k=arguments.length;if(0===k?a=n=0:1===k?(a=0,n=x-_):(a=k-2,n=d(m(s(e),0),x-_)),x+a-n>v)throw TypeError(b);for(u=o(g,n),f=0;f<n;f++)h=_+f,h in g&&i(u,f,g[h]);if(u.length=n,a<n){for(f=_;f<x-n;f++)h=f+n,p=f+a,h in g?g[p]=g[h]:delete g[p];for(f=x;f>x-n+a;f--)delete g[f-1]}else if(a>n)for(f=x-n;f>_;f--)h=f+n-1,p=f+a-1,h in g?g[p]=g[h]:delete g[p];for(f=0;f<a;f++)g[f+_]=arguments[f+2];return g.length=x-n+a,u}})}}]);